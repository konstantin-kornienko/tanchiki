# План реализации 3D игры "Танчики"

## Этап 1: Настройка проекта
- [x] 1.1. Инициализация npm проекта
- [x] 1.2. Установка зависимостей (Three.js, Parcel)
- [x] 1.3. Настройка структуры папок (src/, tests/, assets/)
- [x] 1.4. Создание базового HTML файла
- [x] 1.5. Настройка Parcel для сборки
- [x] 1.6. Проверка запуска пустой сцены Three.js

## Этап 2: Базовая архитектура игры
- [x] 2.1. Класс `Game` - главный контроллер игры
- [x] 2.2. Класс `SceneManager` - управление сценой Three.js
- [x] 2.3. Класс `InputManager` - обработка ввода (клавиатура/мышь)
- [x] 2.4. Класс `GameLoop` - игровой цикл с delta time
- [x] 2.5. Написание тестов для базовых классов

## Этап 3: Танк игрока
- [x] 3.1. Класс `Tank` - базовый класс танка
  - [x] 3.1.1. Корпус танка (прямоугольный с гусеницами)
  - [x] 3.1.2. Башня (цилиндрическая, вращающаяся)
  - [x] 3.1.3. Дуло (цилиндр, прикреплённое к башне)
- [x] 3.2. Класс `PlayerTank` - танк игрока с управлением
- [x] 3.3. Размеры танка: длина 10 метров
- [x] 3.4. Тесты для класса Tank

## Этап 4: Управление танком
- [x] 4.1. Движение вперёд/назад (W/S)
- [x] 4.2. Поворот корпуса влево/вправо (A/D)
- [x] 4.3. Плавное ускорение и торможение
- [x] 4.4. Тесты для системы управления

## Этап 5: Камера и прицеливание
- [x] 5.1. Класс `ThirdPersonCamera` - камера от третьего лица
- [x] 5.2. Камера следует за танком
- [x] 5.3. Класс `AimController` - управление прицелом
- [x] 5.4. Прицел (крестик) выше центра экрана
- [x] 5.5. Башня и дуло следуют за направлением камеры/прицела
- [ ] 5.6. Тесты для камеры и прицеливания

## Этап 6: Генерация карты
- [x] 6.1. Класс `MapGenerator` - генератор карты
- [x] 6.2. Плоскость земли 1000x1000 метров
- [x] 6.3. Класс `Building` - здание
- [x] 6.4. Процедурная генерация зданий разных размеров
- [x] 6.5. Размещение зданий с учётом пространства для движения
- [x] 6.6. Базовое освещение сцены
- [ ] 6.7. Тесты для генератора карты

## Этап 7: Физика и коллизии
- [x] 7.1. Класс `CollisionManager` - менеджер коллизий
- [x] 7.2. Bounding box для танков
- [x] 7.3. Bounding box для зданий
- [x] 7.4. Проверка столкновений танк-здание
- [x] 7.5. Проверка столкновений танк-танк
- [x] 7.6. Предотвращение прохождения сквозь объекты
- [ ] 7.7. Тесты для системы коллизий

## Этап 8: Система стрельбы
- [x] 8.1. Класс `Projectile` - снаряд
- [x] 8.2. Снаряд вылетает из конца дула
- [x] 8.3. Снаряд летит прямо по направлению дула
- [x] 8.4. Обнаружение попадания снаряда
- [ ] 8.5. Визуальные эффекты выстрела и попадания
- [x] 8.6. Перезарядка между выстрелами
- [ ] 8.7. Тесты для системы стрельбы

## Этап 9: Вражеские танки
- [x] 9.1. Класс `EnemyTank` - вражеский танк
- [x] 9.2. Класс `AIController` - контроллер ИИ (встроен в EnemyTank)
- [x] 9.3. Логика движения и патрулирования
- [x] 9.4. Обход препятствий (зданий)
- [x] 9.5. Обнаружение танка игрока
- [x] 9.6. Стрельба по игроку с точностью ≤60%
- [x] 9.7. Генерация 2 вражеских танков на карте
- [ ] 9.8. Тесты для ИИ

## Этап 10: Система здоровья и урона
- [x] 10.1. Класс `HealthSystem` - система здоровья (встроена в Tank)
- [x] 10.2. Здоровье для танка игрока
- [x] 10.3. Здоровье для вражеских танков
- [x] 10.4. Нанесение урона при попадании
- [x] 10.5. Уничтожение танка при 0 HP
- [ ] 10.6. Тесты для системы здоровья

## Этап 11: Начальное меню
- [x] 11.1. Класс `MenuManager` - управление меню
- [x] 11.2. HTML/CSS для экрана меню
- [x] 11.3. Кнопка "Начать игру"
- [x] 11.4. Переход от меню к игре
- [ ] 11.5. Тесты для меню

## Этап 12: HUD (интерфейс во время игры)
- [x] 12.1. Класс `HUD` - игровой интерфейс
- [x] 12.2. Отображение здоровья игрока
- [x] 12.3. Отображение прицела (крестик)
- [x] 12.4. Индикатор перезарядки
- [ ] 12.5. Тесты для HUD

## Этап 13: Миникарта
- [x] 13.1. Класс `Minimap` - миникарта
- [x] 13.2. Отображение карты сверху
- [x] 13.3. Позиция танка игрока
- [x] 13.4. Позиции вражеских танков
- [x] 13.5. Отображение зданий
- [ ] 13.6. Тесты для миникарты

## Этап 14: Условия победы/поражения
- [x] 14.1. Победа при уничтожении всех врагов
- [x] 14.2. Поражение при уничтожении танка игрока
- [x] 14.3. Экран победы/поражения
- [x] 14.4. Возврат в главное меню

## Этап 15: Полировка и оптимизация
- [ ] 15.1. Улучшение графики (текстуры, материалы)
- [ ] 15.2. Оптимизация производительности
- [ ] 15.3. Тестирование в Chrome и Firefox
- [ ] 15.4. Финальное тестирование всех систем
- [ ] 15.5. Исправление багов

## Этап 16: Сборка для деплоя
- [ ] 16.1. Настройка продакшен сборки
- [ ] 16.2. Создание скрипта для сборки .zip архива
- [ ] 16.3. Тестирование статичных файлов

---

## Структура проекта

```
tanchiki/
├── src/
│   ├── index.html
│   ├── index.js          # Точка входа
│   ├── styles.css
│   ├── core/
│   │   ├── Game.js
│   │   ├── SceneManager.js
│   │   ├── InputManager.js
│   │   └── GameLoop.js
│   ├── entities/
│   │   ├── Tank.js
│   │   ├── PlayerTank.js
│   │   ├── EnemyTank.js
│   │   ├── Building.js
│   │   └── Projectile.js
│   ├── systems/
│   │   ├── CollisionManager.js
│   │   ├── HealthSystem.js
│   │   └── AIController.js
│   ├── world/
│   │   └── MapGenerator.js
│   ├── camera/
│   │   ├── ThirdPersonCamera.js
│   │   └── AimController.js
│   └── ui/
│       ├── MenuManager.js
│       ├── HUD.js
│       └── Minimap.js
├── tests/
│   └── ... (тесты для каждого класса)
├── assets/
│   └── ... (текстуры, если понадобятся)
├── package.json
├── plan.md
└── implementation_details.md
```

---

## Зависимости

```json
{
  "dependencies": {
    "three": "^0.160.0"
  },
  "devDependencies": {
    "parcel": "^2.11.0",
    "jest": "^29.7.0"
  }
}
```
